model Person {
    id               String            @id @default(uuid())
    email            String            @unique
    password         String
    role             UserRole          @default(USER)
    isDeleted        Boolean           @default(false)
    createdAt        DateTime          @default(now())
    updatedAt        DateTime          @updatedAt
    user             User?
    admin            Admin?
    host             Host?
    hostApplications HostApplication[]

    @@map("persons")
}

model User {
    id            String   @id @default(uuid())
    name          String
    email         String   @unique
    password      String
    role          UserRole @default(USER)
    profilePhoto  String?
    contactNumber String
    address       String?
    gender        Gender
    interests     String[]
    isDeleted     Boolean  @default(false)
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt

    participants Participant[]
    reviews      Review[]
    payments     Payment[]

    person           Person            @relation(fields: [email], references: [email])
    hostApplications HostApplication[]

    @@map("users")
}

model Admin {
    id            String   @id @default(uuid())
    name          String
    email         String   @unique
    password      String
    role          UserRole @default(USER)
    profilePhoto  String?
    contactNumber String
    address       String?
    gender        Gender
    interests     String[]
    isDeleted     Boolean  @default(false)
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt

    person Person @relation(fields: [email], references: [email])

    @@map("admins")
}

model Host {
    id            String   @id @default(uuid())
    name          String
    email         String   @unique
    password      String
    role          UserRole @default(USER)
    profilePhoto  String?
    contactNumber String
    address       String
    gender        Gender
    interests     String[]
    isDeleted     Boolean  @default(false)
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt

    events  Event[]  @relation(name: "hostedEvents")
    reviews Review[]

    person Person @relation(fields: [email], references: [email])

    @@map("hosts")
}

model HostApplication {
    id            String                @id @default(uuid())
    userEmail     String
    user          User                  @relation(fields: [userEmail], references: [email])
    email         String
    name          String
    contactNumber String
    address       String
    gender        Gender
    interests     String[]
    reason        String? // Why they want to become a host
    status        HostApplicationStatus @default(PENDING)
    reviewedBy    String? // Admin who reviewed the application
    reviewedAt    DateTime?
    feedback      String? // Admin feedback/reason for rejection
    createdAt     DateTime              @default(now())
    updatedAt     DateTime              @updatedAt
    person        Person?               @relation(fields: [personEmail], references: [email])
    personEmail      String?

    @@map("host_applications")
}
